<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="format-detection" content="telephone=no">
    <meta name="format-detection" content="date=no">
    <meta name="format-detection" content="address=no">
    <meta name="format-detection" content="email=no">
    <meta name="pdf-engine" content="WeasyPrint">
    <title>Lista de Asistencia</title>
    <link rel="stylesheet" href="css/attendance_list.css">
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">
                <!-- Logo con ruta de datos en base64 -->
                {% if logo_base64 %}
                <img src="data:image/png;base64,{{ logo_base64 }}" alt="Logo de la empresa">
                {% else %}
                <div style="width: 150px; height: 50px; background-color: #f0f0f0; display: flex; align-items: center; justify-content: center; font-weight: bold;">LOGO</div>
                {% endif %}
            </div>
            <div class="header-info">
                <h1>Lista de Asistencia</h1>
                <h2>{{ session_title }}</h2>
                <p class="date">Fecha: {{ session_date }}</p>
            </div>
        </header>

        <section class="session-info">
            <div class="info-row">
                <div class="info-item">
                    <span class="label">Curso:</span>
                    <span class="value">{{ course_title }}</span>
                </div>
                <div class="info-item">
                    <span class="label">Instructor:</span>
                    <span class="value">{{ instructor_name }}</span>
                </div>
            </div>
            <div class="info-row">
                <div class="info-item">
                    <span class="label">Lugar:</span>
                    <span class="value">{{ location }}</span>
                </div>
                <div class="info-item">
                    <span class="label">Duración:</span>
                    <span class="value">{{ duration }} horas</span>
                </div>
            </div>
        </section>

        <section class="attendance-table">
            <table>
                <thead>
                    <tr>
                        <th>No.</th>
                        <th>Nombre</th>
                        <th>Documento</th>
                        <th>Cargo</th>
                        <th>Firma</th>
                    </tr>
                </thead>
                <tbody>
                    {% for attendee in attendees %}
                    <tr>
                        <td>{{ loop.index }}</td>
                        <td>{{ attendee.name }}</td>
                        <td>{{ attendee.document }}</td>
                        <td>{{ attendee.position }}</td>
                        <td class="signature"></td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </section>

        <section class="summary">
            <div class="summary-row">
                <div class="summary-item">
                    <span class="label">Total Asistentes:</span>
                    <span class="value">{{ total_attendees }}</span>
                </div>
                <div class="summary-item">
                    <span class="label">Porcentaje de Asistencia:</span>
                    <span class="value">{{ attendance_percentage }}%</span>
                </div>
            </div>
        </section>

        <section class="signatures">
            <div class="signature-box">
                <div class="signature-line"></div>
                <p>Firma del Instructor</p>
            </div>
            <div class="signature-box">
                <div class="signature-line"></div>
                <p>Firma del Responsable SST</p>
            </div>
        </section>

        <footer>
            <p>Documento generado el {{ generation_date }} a las {{ generation_time }}</p>
            <p class="page-number">Página <span class="page"></span></p>
        </footer>
    </div>
</body>
</html>